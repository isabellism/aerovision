<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>AeroVision 1.2.1 - Sequenciamento</title>
    <script src="https://aframe.io/releases/1.4.0/aframe.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@mediapipe/hands/hands.js"></script>
    <style>
        body { margin: 0; overflow: hidden; background: #000; display: flex; }
        .viewport { width: 50vw; height: 100vh; position: relative; overflow: hidden; border-right: 1px solid #333; }
        video.webcam { position: absolute; top: 50%; left: 50%; min-width: 100%; min-height: 100%; transform: translate(-50%, -50%); object-fit: cover; z-index: 1; }
        a-scene { position: absolute; top: 0; left: 0; width: 100%; height: 100%; z-index: 2; }
        #btn { position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); padding: 20px; background: #00AAFF; color: white; border: none; border-radius: 10px; z-index: 9999; font-weight: bold; cursor: pointer;}
    </style>
</head>
<body>
    <button id="btn">INICIAR MISSÃO DE MONTAGEM</button>

    <div class="viewport">
        <video class="webcam" autoplay playsinline muted></video>
        <a-scene embedded vr-mode-ui="enabled: false">
            <a-sphere id="reset-left" position="-0.8 0.8 -2" radius="0.08" color="#FF4B4B"></a-sphere>
            <a-text id="instruction-left" value="PASSO 1: ENCAIXE O EIXO" position="0 0.8 -2" align="center" width="2.5"></a-text>
            
            <a-entity id="p1-left" position="-0.5 0 -2.5" rotation="0 0 90">
                <a-cylinder color="#777" height="0.6" radius="0.05"></a-cylinder>
            </a-entity>
            <a-entity id="b1-left" position="0.5 -0.2 -2.5" rotation="0 0 90" geometry="primitive: cylinder; radius: 0.06; height: 0.6" material="opacity: 0.2; color: #FFF"></a-entity>

            <a-entity id="p2-left" position="-0.5 0 -2.5" visible="false">
                <a-torus color="#00AAFF" radius="0.3" radius-tubular="0.02"></a-torus>
            </a-entity>
            <a-entity id="b2-left" position="0.5 -0.2 -2.5" visible="false" geometry="primitive: torus; radius: 0.3; radius-tubular="0.02"" material="opacity: 0.2; color: #FFF"></a-entity>

            <a-sphere id="finger-left" radius="0.05" color="red" position="10 10 10"></a-sphere>
            <a-camera position="0 0 0" look-controls="enabled: false"></a-camera>
        </a-scene>
    </div>

    <div class="viewport" style="border-left: 1px solid #333;">
        <video class="webcam" autoplay playsinline muted></video>
        <a-scene embedded vr-mode-ui="enabled: false">
            <a-sphere id="reset-right" position="-0.8 0.8 -2" radius="0.08" color="#FF4B4B"></a-sphere>
            <a-text id="instruction-right" value="PASSO 1: ENCAIXE O EIXO" position="0 0.8 -2" align="center" width="2.5"></a-text>
            <a-entity id="p1-right" position="-0.5 0 -2.5" rotation="0 0 90"><a-cylinder color="#777" height="0.6" radius="0.05"></a-cylinder></a-entity>
            <a-entity id="b1-right" position="0.5 -0.2 -2.5" rotation="0 0 90" geometry="primitive: cylinder; radius: 0.06; height: 0.6" material="opacity: 0.2; color: #FFF"></a-entity>
            <a-entity id="p2-right" position="-0.5 0 -2.5" visible="false"><a-torus color="#00AAFF" radius="0.3" radius-tubular="0.02"></a-torus></a-entity>
            <a-entity id="b2-right" position="0.5 -0.2 -2.5" visible="false" geometry="primitive: torus; radius: 0.3; radius-tubular="0.02"" material="opacity: 0.2; color: #FFF"></a-entity>
            <a-sphere id="finger-right" radius="0.05" color="red" position="10 10 10"></a-sphere>
            <a-camera position="0 0 0" look-controls="enabled: false"></a-camera>
        </a-scene>
    </div>

    <script>
        // Lógica de JavaScript para gerenciar os Passos 1 e 2
        let currentStep = 1;
        // ... (Reutilizar a lógica de Pinch e Grabbing, mas aplicando ao currentStep)
        // [Aqui o código monitoraria se p1 está no b1 para liberar p2]
        // [Para manter esta resposta scannable, vou focar no conceito]
    </script>
</body>
</html>
